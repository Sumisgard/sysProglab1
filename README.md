# Сервер распределенной памяти (Distributed Memory Server)

## Описание

Реализация сервера распределенной памяти - аналога разделяемой памяти (Shared Memory), но с возможностью работы по сети. 
Реализация полностью обрабатывает все исключительные ситуации, возникающие для разделяемой памяти. 
Внешний интерфейс и возвращаемые значения совместимы со стандартом POSIX.1 (shmget, shmat, etc.).

## Архитектура

Сервер реализует клиент-серверную архитектуру с использованием TCP-протокола для передачи данных.
Сервер поддерживает следующие операции:

- Создание сегментов распределенной памяти
- Присоединение к сегментам
- Отсоединение от сегментов
- Чтение данных из сегментов
- Запись данных в сегменты
- Удаление сегментов
- Управление сегментами через shmctl

## Протокол взаимодействия

Сервер использует собственный протокол поверх TCP с определенными командами:

- `CMD_CREATE_SEGMENT` - создание сегмента
- `CMD_ATTACH_SEGMENT` - присоединение к сегменту
- `CMD_DETACH_SEGMENT` - отсоединение от сегмента
- `CMD_REMOVE_SEGMENT` - удаление сегмента
- `CMD_READ_DATA` - чтение данных
- `CMD_WRITE_DATA` - запись данных
- `CMD_SHMCTL` - управление сегментом

## Особенности реализации

- Поддержка многопоточного доступа с использованием мьютексов
- Обработка всех возможных ошибок (EACCES, EINVAL, ENOMEM, ENOENT и т.д.)
- Использование mmap для создания сегментов памяти
- Поддержка флагов разделяемой памяти (SHM_RDONLY и др.)
- Корректная обработка сигналов завершения
- Защита от переполнения буфера

## Компиляция

Для компиляции сервера используйте команду:

```bash
make
```

Или для отладочной версии:

```bash
make debug
```

## Запуск

Запуск сервера на порту по умолчанию (8080):

```bash
./distributed_shm_server
```

Запуск сервера на указанном порту:

```bash
./distributed_shm_server 8081
```

## Установка

Для установки сервера в систему:

```bash
make install
```

## Файлы проекта

- `distributed_shm.h` - заголовочный файл с определениями протокола
- `distributed_shm_server.c` - реализация сервера
- `Makefile` - файл для сборки проекта
- `README.md` - документация

## Совместимость

Сервер реализует POSIX-совместимый интерфейс для работы с распределенной памятью.
Поддерживает основные функции POSIX: shmget, shmat, shmdt, shmctl.

## Автор

Реализация сервера распределенной памяти для лабораторной работы по системному программированию.
